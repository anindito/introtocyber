<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 650">
  <defs>
    <linearGradient id="userGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db"/>
      <stop offset="100%" style="stop-color:#2980b9"/>
    </linearGradient>
    <linearGradient id="attackerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c"/>
      <stop offset="100%" style="stop-color:#c0392b"/>
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60"/>
      <stop offset="100%" style="stop-color:#1e8449"/>
    </linearGradient>
    <linearGradient id="dbGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6"/>
      <stop offset="100%" style="stop-color:#8e44ad"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="950" height="650" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="475" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#1e3a5f" text-anchor="middle">Diagram 12.2: Konsep SQL Injection</text>
  
  <!-- Section A: Normal Flow -->
  <rect x="20" y="55" width="440" height="270" rx="10" fill="#e8f8f5" stroke="#27ae60" stroke-width="2"/>
  <text x="240" y="80" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#27ae60" text-anchor="middle">A. Alur Normal (Tanpa Serangan)</text>
  
  <!-- Normal User -->
  <g transform="translate(50, 110)" filter="url(#shadow)">
    <circle cx="35" cy="20" r="18" fill="url(#userGrad)"/>
    <rect x="15" y="45" width="40" height="50" rx="5" fill="url(#userGrad)"/>
    <text x="35" y="115" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">Pengguna</text>
    <text x="35" y="128" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle">Normal</text>
  </g>
  
  <!-- Normal Input Box -->
  <g transform="translate(140, 130)">
    <rect x="0" y="0" width="100" height="60" rx="5" fill="white" stroke="#27ae60" stroke-width="2"/>
    <text x="50" y="20" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">Input:</text>
    <text x="50" y="38" font-family="Arial, sans-serif" font-size="9" fill="#27ae60" text-anchor="middle" font-weight="bold">ahmad@email.com</text>
    <text x="50" y="52" font-family="Arial, sans-serif" font-size="9" fill="#27ae60" text-anchor="middle" font-weight="bold">password123</text>
  </g>
  
  <!-- Normal Server -->
  <g transform="translate(280, 110)" filter="url(#shadow)">
    <rect x="0" y="0" width="70" height="80" rx="5" fill="url(#serverGrad)"/>
    <rect x="10" y="10" width="50" height="10" rx="2" fill="#ffffff" opacity="0.3"/>
    <rect x="10" y="25" width="50" height="10" rx="2" fill="#ffffff" opacity="0.3"/>
    <rect x="10" y="40" width="50" height="10" rx="2" fill="#ffffff" opacity="0.3"/>
    <text x="35" y="100" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">Web</text>
    <text x="35" y="113" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle">Server</text>
  </g>
  
  <!-- Normal Database -->
  <g transform="translate(385, 110)" filter="url(#shadow)">
    <ellipse cx="35" cy="15" rx="30" ry="12" fill="url(#dbGrad)"/>
    <rect x="5" y="15" width="60" height="50" fill="url(#dbGrad)"/>
    <ellipse cx="35" cy="65" rx="30" ry="12" fill="url(#dbGrad)"/>
    <ellipse cx="35" cy="15" rx="30" ry="12" fill="none" stroke="#7d3c98" stroke-width="2"/>
    <text x="35" y="100" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">Database</text>
  </g>
  
  <!-- Normal Flow Arrows -->
  <line x1="120" y1="160" x2="138" y2="160" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <line x1="242" y1="160" x2="278" y2="160" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <line x1="352" y1="160" x2="383" y2="160" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowGreen)"/>
  
  <!-- Normal Query Box -->
  <g transform="translate(135, 230)">
    <rect x="0" y="0" width="280" height="55" rx="5" fill="#d5f5e3" stroke="#27ae60" stroke-width="1"/>
    <text x="140" y="18" font-family="Arial, sans-serif" font-size="10" fill="#1e8449" text-anchor="middle" font-weight="bold">Query yang Dieksekusi:</text>
    <text x="140" y="35" font-family="Courier New, monospace" font-size="9" fill="#333" text-anchor="middle">SELECT * FROM pengguna WHERE</text>
    <text x="140" y="48" font-family="Courier New, monospace" font-size="9" fill="#333" text-anchor="middle">email='ahmad@email.com' AND password='password123'</text>
  </g>
  
  <!-- Result Normal -->
  <g transform="translate(135, 290)">
    <rect x="0" y="0" width="280" height="25" rx="5" fill="#27ae60"/>
    <text x="140" y="17" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">âœ“ Login Berhasil (1 user ditemukan)</text>
  </g>
  
  <!-- Section B: Attack Flow -->
  <rect x="490" y="55" width="440" height="270" rx="10" fill="#fdedec" stroke="#e74c3c" stroke-width="2"/>
  <text x="710" y="80" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#e74c3c" text-anchor="middle">B. Alur Serangan SQL Injection</text>
  
  <!-- Attacker -->
  <g transform="translate(520, 110)" filter="url(#shadow)">
    <circle cx="35" cy="20" r="18" fill="url(#attackerGrad)"/>
    <rect x="15" y="45" width="40" height="50" rx="5" fill="url(#attackerGrad)"/>
    <text x="35" y="115" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">Penyerang</text>
    <text x="35" y="128" font-family="Arial, sans-serif" font-size="10" fill="#c0392b" text-anchor="middle">âš ï¸</text>
  </g>
  
  <!-- Malicious Input Box -->
  <g transform="translate(610, 130)">
    <rect x="0" y="0" width="100" height="60" rx="5" fill="white" stroke="#e74c3c" stroke-width="2"/>
    <text x="50" y="20" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">Input Berbahaya:</text>
    <text x="50" y="38" font-family="Arial, sans-serif" font-size="9" fill="#e74c3c" text-anchor="middle" font-weight="bold">' OR '1'='1</text>
    <text x="50" y="52" font-family="Arial, sans-serif" font-size="9" fill="#e74c3c" text-anchor="middle" font-weight="bold">' OR '1'='1</text>
  </g>
  
  <!-- Attack Server -->
  <g transform="translate(750, 110)" filter="url(#shadow)">
    <rect x="0" y="0" width="70" height="80" rx="5" fill="url(#serverGrad)"/>
    <rect x="10" y="10" width="50" height="10" rx="2" fill="#ffffff" opacity="0.3"/>
    <rect x="10" y="25" width="50" height="10" rx="2" fill="#ffffff" opacity="0.3"/>
    <rect x="10" y="40" width="50" height="10" rx="2" fill="#ffffff" opacity="0.3"/>
    <text x="35" y="100" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">Web</text>
    <text x="35" y="113" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle">Server</text>
  </g>
  
  <!-- Attack Database -->
  <g transform="translate(855, 110)" filter="url(#shadow)">
    <ellipse cx="35" cy="15" rx="30" ry="12" fill="url(#dbGrad)"/>
    <rect x="5" y="15" width="60" height="50" fill="url(#dbGrad)"/>
    <ellipse cx="35" cy="65" rx="30" ry="12" fill="url(#dbGrad)"/>
    <ellipse cx="35" cy="15" rx="30" ry="12" fill="none" stroke="#7d3c98" stroke-width="2"/>
    <text x="35" y="100" font-family="Arial, sans-serif" font-size="11" fill="#333" text-anchor="middle" font-weight="bold">Database</text>
  </g>
  
  <!-- Attack Flow Arrows -->
  <line x1="590" y1="160" x2="608" y2="160" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowRed)"/>
  <line x1="712" y1="160" x2="748" y2="160" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowRed)"/>
  <line x1="822" y1="160" x2="853" y2="160" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowRed)"/>
  
  <!-- Malicious Query Box -->
  <g transform="translate(505, 230)">
    <rect x="0" y="0" width="410" height="55" rx="5" fill="#f9ebea" stroke="#e74c3c" stroke-width="1"/>
    <text x="205" y="18" font-family="Arial, sans-serif" font-size="10" fill="#c0392b" text-anchor="middle" font-weight="bold">Query yang Dieksekusi (Terinjeksi):</text>
    <text x="205" y="35" font-family="Courier New, monospace" font-size="9" fill="#333" text-anchor="middle">SELECT * FROM pengguna WHERE email='' <tspan fill="#e74c3c" font-weight="bold">OR '1'='1'</tspan></text>
    <text x="205" y="48" font-family="Courier New, monospace" font-size="9" fill="#333" text-anchor="middle">AND password='' <tspan fill="#e74c3c" font-weight="bold">OR '1'='1'</tspan></text>
  </g>
  
  <!-- Result Attack -->
  <g transform="translate(505, 290)">
    <rect x="0" y="0" width="410" height="25" rx="5" fill="#e74c3c"/>
    <text x="205" y="17" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">âš ï¸ Login Berhasil Tanpa Kredensial Valid (SEMUA user dikembalikan)</text>
  </g>
  
  <!-- Explanation Section -->
  <rect x="20" y="340" width="910" height="130" rx="10" fill="white" stroke="#1e3a5f" stroke-width="2"/>
  <text x="475" y="365" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e3a5f" text-anchor="middle">Mengapa Serangan Ini Berhasil?</text>
  
  <!-- Explanation boxes -->
  <g transform="translate(40, 380)">
    <rect x="0" y="0" width="270" height="70" rx="5" fill="#e8f4f8"/>
    <text x="135" y="20" font-family="Arial, sans-serif" font-size="11" fill="#1e3a5f" text-anchor="middle" font-weight="bold">1. Input Tidak Divalidasi</text>
    <text x="135" y="38" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Aplikasi menerima input pengguna</text>
    <text x="135" y="52" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">tanpa memeriksa karakter berbahaya</text>
  </g>
  
  <g transform="translate(330, 380)">
    <rect x="0" y="0" width="270" height="70" rx="5" fill="#fef5e7"/>
    <text x="135" y="20" font-family="Arial, sans-serif" font-size="11" fill="#f39c12" text-anchor="middle" font-weight="bold">2. Kondisi Selalu TRUE</text>
    <text x="135" y="38" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">'1'='1' selalu bernilai TRUE</text>
    <text x="135" y="52" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">sehingga WHERE clause menjadi valid</text>
  </g>
  
  <g transform="translate(620, 380)">
    <rect x="0" y="0" width="270" height="70" rx="5" fill="#fdedec"/>
    <text x="135" y="20" font-family="Arial, sans-serif" font-size="11" fill="#e74c3c" text-anchor="middle" font-weight="bold">3. Akses Tidak Sah</text>
    <text x="135" y="38" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Query mengembalikan semua data</text>
    <text x="135" y="52" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">penyerang masuk tanpa password</text>
  </g>
  
  <!-- Impact Section -->
  <rect x="20" y="485" width="910" height="90" rx="10" fill="#1e3a5f"/>
  <text x="475" y="510" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Dampak Potensial SQL Injection</text>
  
  <g transform="translate(50, 525)">
    <rect x="0" y="0" width="180" height="35" rx="5" fill="#e74c3c"/>
    <text x="90" y="22" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">ğŸ”“ Pencurian Data</text>
  </g>
  
  <g transform="translate(250, 525)">
    <rect x="0" y="0" width="180" height="35" rx="5" fill="#f39c12"/>
    <text x="90" y="22" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">ğŸ“ Manipulasi Data</text>
  </g>
  
  <g transform="translate(450, 525)">
    <rect x="0" y="0" width="180" height="35" rx="5" fill="#9b59b6"/>
    <text x="90" y="22" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">ğŸ—‘ï¸ Penghapusan Data</text>
  </g>
  
  <g transform="translate(650, 525)">
    <rect x="0" y="0" width="200" height="35" rx="5" fill="#2c3e50"/>
    <text x="100" y="22" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">ğŸ’» Pengambilalihan Sistem</text>
  </g>
  
  <!-- Footer -->
  <text x="475" y="630" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">Modul 12 - SQL Injection | Pengantar Keamanan Siber</text>
</svg>
